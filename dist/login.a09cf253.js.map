{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBDGA,MAAME,EAAiBC,SAASC,eAAe,kBACzCC,EAAgBF,SAASC,eAAe,iBAE9CF,EAAeI,iBAAiB,UAAUC,MAAMC,IAC5CA,EAAEC,iBACFC,QAAQC,IAAI,YAEZ,MAAMC,EAAOV,EAAeU,KAAKC,MAC3BC,EAAWZ,EAAeY,SAASD,MACnCE,EAAYb,EAAea,UAAUF,MACrCG,EAAQd,EAAec,MAAMH,MAC7BI,EAAWf,EAAee,SAASJ,MAEnCK,EAAU,MACZN,WACAE,YACAC,QACAC,WACAC,EACAE,SAAS,GAGb,GAAY,KAATP,GAA4B,KAAbE,GAAiC,KAAdC,GAA8B,KAAVC,GAA6B,KAAbC,EAAgB,CACrF,MAAMG,QCvBdb,eAA0Bc,GAH1BL,MAGkCA,EAHlCC,SAGyCA,IACrC,IACI,MALRK,KAKgBA,SAAeC,EAAAC,+BAA+BH,EAAML,EAAOC,GACnE,OAAOK,EAIV,MAAMd,GACHE,QAAQC,IAAIH,GAEE,uBAAXA,EAAEiB,MACDC,MAAM,+CAGI,8BAAXlB,EAAEiB,MACDC,MAAM,qCDQgBC,CAAW5B,EAAAsB,KAAMH,SCiBnDX,eAAiCqB,EAAIC,EAAQC,GACzC,UACU7B,EAAA8B,OAAO9B,EAAA+B,IAAIJ,EAAI,QAASC,GAASC,GACzC,MAAMtB,GACJE,QAAQC,IAAIH,IDpBNyB,CAAkBlC,EAAA6B,GAAIR,EAAYc,IAAKhB,GAC7CR,QAAQC,IAAIS,GACZM,MAAM,YAAYR,EAAQN,aAG1Bc,MAAM,6BAKdrB,EAAcC,iBAAiB,UAAUE,IACrCA,EAAEC,iBAEF,MAAMO,EAAQX,EAAcW,MAAMH,MAC5BI,EAAWZ,EAAcY,SAASJ,OCjB5CN,eAAyBc,EAAML,EAAOC,GAClC,IACI,MA1BRK,KA0BgBA,SAAeC,EAAAY,2BAA2Bd,EAAML,EAAOC,GAC/DP,QAAQC,IAAIW,GACZI,MAAM,qBAAqBJ,EAAKY,OAEnC,MAAM1B,GACHE,QAAQC,IAAIH,GAEE,wBAAXA,EAAEiB,MACDC,MAAM,8BAGI,wBAAXlB,EAAEiB,MACDC,MAAM,+BDKdU,CAAUrC,EAAAsB,KAAML,EAAOC,GAEpBK,KAAKH,QAKRT,QAAQC,IAAI","sources":["src/scripts/login.js","src/scripts/functions/auth.js"],"sourcesContent":["import { db, auth} from \"../scripts/app\";\r\nimport { createUser, loginUser, addUserToDataBase } from \"./functions/auth\";\r\n\r\nconst createUserForm = document.getElementById(\"createUserForm\");\r\nconst loginUserForm = document.getElementById(\"loginUserForm\");\r\n\r\ncreateUserForm.addEventListener(\"submit\", async(e) => {\r\n    e.preventDefault();\r\n    console.log(\"New User\");\r\n\r\n    const name = createUserForm.name.value;\r\n    const lastName = createUserForm.lastName.value;\r\n    const cellphone = createUserForm.cellphone.value;\r\n    const email = createUserForm.email.value;\r\n    const password = createUserForm.password.value;\r\n\r\n    const newUser = {\r\n        name,\r\n        lastName,\r\n        cellphone,\r\n        email,\r\n        password,\r\n        isAdmin: false\r\n    }\r\n\r\n    if(name !== \"\" && lastName !== \"\" && cellphone !== \"\" && email !== \"\" && password !== \"\"){\r\n        const userCreated = await createUser(auth, newUser);\r\n        await addUserToDataBase(db, userCreated.uid, newUser);\r\n        console.log(userCreated);\r\n        alert(`Welcome, ${newUser.name}`);\r\n\r\n    }else{\r\n        alert(`Please fill every form`);\r\n\r\n    }\r\n});\r\n\r\nloginUserForm.addEventListener(\"submit\", e =>{\r\n    e.preventDefault();\r\n\r\n    const email = loginUserForm.email.value;\r\n    const password = loginUserForm.password.value;\r\n\r\n    loginUser(auth, email, password);\r\n\r\n    if(user.isAdmin) {\r\n        //location.href = \"./\"\r\n    }else {\r\n        //\r\n    }\r\n    console.log(\"User Login\")\r\n});\r\n\r\n\r\n\r\n","import { doc, setDoc } from \"firebase/firestore\";\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\n\r\nasync function createUser(auth, { email, password }){\r\n    try {\r\n        const { user } = await createUserWithEmailAndPassword(auth, email, password);\r\n        return user;\r\n\r\n        //console.log(user);\r\n\r\n    }catch(e) {\r\n        console.log(e);\r\n\r\n        if(e.code === \"auth/wear-password\"){\r\n            alert(\"Password must be at least 6 characters long\");\r\n        }\r\n        \r\n        if(e.code === \"auth/email-already-in-use\"){\r\n            alert(\"This email is already registered\");\r\n        }\r\n    }\r\n\r\n}\r\n\r\nasync function loginUser(auth, email, password){\r\n    try{\r\n        const { user } = await signInWithEmailAndPassword(auth, email, password);\r\n        console.log(user);\r\n        alert(`Successful login, ${user.uid}`);\r\n\r\n    }catch(e){\r\n        console.log(e);\r\n\r\n        if(e.code === \"auth/wrong-password\"){\r\n            alert(\"Inavalid email or password\");\r\n        }\r\n\r\n        if(e.code === \"auth/user-not-found\"){\r\n            alert(\"Inavalid email or password\");\r\n        }\r\n    }\r\n}\r\n\r\nasync function addUserToDataBase(db, userId, userInfo) {\r\n    try {\r\n        await setDoc(doc(db, \"users\", userId), userInfo);\r\n    } catch(e){\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport {\r\n    createUser,\r\n    loginUser,\r\n    addUserToDataBase\r\n}"],"names":["$li1Mx","parcelRequire","$etBjH","$3f9d32fa80182a14$var$createUserForm","document","getElementById","$3f9d32fa80182a14$var$loginUserForm","addEventListener","async","e","preventDefault","console","log","name","value","lastName","cellphone","email","password","newUser","isAdmin","userCreated","auth","user","$1tHc5","createUserWithEmailAndPassword","code","alert","$9a41b7ebdf9580fc$export$3493b8991d49f558","db","userId","userInfo","setDoc","doc","$9a41b7ebdf9580fc$export$587c2b1c2abea0f5","uid","signInWithEmailAndPassword","$9a41b7ebdf9580fc$export$692b4a7cc7a486ce"],"version":3,"file":"login.a09cf253.js.map"}